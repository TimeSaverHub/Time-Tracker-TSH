(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5232:function(e,t,r){Promise.resolve().then(r.t.bind(r,9974,23)),Promise.resolve().then(r.t.bind(r,2778,23)),Promise.resolve().then(r.bind(r,9666))},9666:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return p},a:function(){return m}});var a=r(7437),n=r(2265),s=r(9376),i=r(3301),o=r(5978),u=r(738);let l=(0,u.C6)().length>0?(0,u.Mq)():(0,u.ZF)({apiKey:"AIzaSyBaDHrLtTLBb7QViuG2800nLTTaCyY2uy4",authDomain:"timetracker-tsh.firebaseapp.com",projectId:"timetracker-tsh",storageBucket:"timetracker-tsh.firebasestorage.app",messagingSenderId:"515583830047",appId:"1:515583830047:web:2d93143879a9cd015c0d2a"}),c=(0,i.v0)(l),h=(0,o.ad)(l);new i.hJ;let d=(0,n.createContext)(null);async function f(e,t){if(!e)return;let r=(0,o.JU)(h,"users",e.uid);if(!(await (0,o.QT)(r)).exists()){let{email:a,photoURL:n,displayName:s}=e,i=new Date;try{await (0,o.pl)(r,{email:a,photoURL:n,name:(null==t?void 0:t.name)||s||(null==a?void 0:a.split("@")[0]),createdAt:i,updatedAt:i})}catch(e){throw console.error("Error creating user document:",e),Error("Failed to create user profile")}}return r}function w(e){switch(e.code){case"auth/wrong-password":return"Invalid email or password";case"auth/user-not-found":return"No user found with this email";case"auth/email-already-in-use":return"Email already in use";case"auth/weak-password":return"Password should be at least 6 characters";default:return"An error occurred. Please try again"}}function p(e){let{children:t}=e,r=(0,s.useRouter)(),[u,l]=(0,n.useState)(null),[p,m]=(0,n.useState)(!0),[y,g]=(0,n.useState)(null),[b,_]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=!0,t=(0,i.Aj)(c,async t=>{if(e)try{if(t){let e=await (0,o.QT)((0,o.JU)(h,"users",t.uid)),r={id:t.uid,email:t.email,name:e.exists()?e.data().name:t.displayName,photoURL:t.photoURL};l(r)}else l(null)}catch(e){console.error("Error in auth state change:",e),g(e instanceof Error?e.message:"Authentication error")}finally{e&&m(!1)}});return()=>{e=!1,t()}},[]),(0,n.useEffect)(()=>{if(p||b)return;let e=window.location.pathname;u?("/login"===e||"/signup"===e||"/"===e)&&r.push("/dashboard"):"/login"!==e&&"/signup"!==e&&r.push("/login")},[u,p,b,r]);let v=async(e,t)=>{try{g(null),_(!0),await (0,i.e5)(c,e,t),r.push("/dashboard")}catch(e){throw console.error("Sign in error:",e),g(w(e)),e}finally{_(!1)}},E=async()=>{try{g(null),_(!0);let e=new i.hJ,{user:t}=await (0,i.rh)(c,e);await f(t),r.push("/dashboard")}catch(e){throw g(w(e)),e}finally{_(!1)}},k=async(e,t,a)=>{try{g(null),_(!0);let{user:n}=await (0,i.Xb)(c,e,t);await f(n,{name:a}),r.push("/dashboard")}catch(e){throw console.error("Signup error:",e),g(w(e)),e}finally{_(!1)}},S=async()=>{try{_(!0),await (0,i.w7)(c),r.push("/login")}catch(e){throw g(w(e)),e}finally{_(!1)}};return(0,a.jsx)(d.Provider,{value:{currentUser:u,loading:p||b,error:y,signIn:v,signInWithGoogle:E,signUp:k,signOut:S,clearError:()=>g(null)},children:t})}function m(){let e=(0,n.useContext)(d);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},2778:function(){},9974:function(e){e.exports={style:{fontFamily:"'__Inter_d65c78', '__Inter_Fallback_d65c78'",fontStyle:"normal"},className:"__className_d65c78"}}},function(e){e.O(0,[635,853,139,546,971,117,744],function(){return e(e.s=5232)}),_N_E=e.O()}]);